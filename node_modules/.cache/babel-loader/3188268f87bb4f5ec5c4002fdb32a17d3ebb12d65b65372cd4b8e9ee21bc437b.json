{"ast":null,"code":"import React, { useEffect, useState } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nvar generateQueryString = function (q) {\n  var queryString = '';\n  if (q) {\n    var queryKeys = Object.keys(q);\n    queryKeys.forEach(function (key) {\n      if (q[key]) {\n        if (q[key].toString().length) {\n          queryString += key + \"=\" + q[key] + \"&\";\n        }\n      }\n    });\n    if (queryKeys.length > 0 && queryString[queryString.length - 1] === '&') {\n      queryString = queryString.slice(0, -1);\n    }\n  }\n  return queryString;\n};\n\n// Hook\nvar cachedScripts = [];\nvar useScript = function (src) {\n  // Keeping track of script loaded and error state\n  var _a = useState({\n      loaded: false,\n      error: false\n    }),\n    state = _a[0],\n    setState = _a[1];\n  useEffect(function () {\n    // If cachedScripts array already includes src that means another instance ...\n    // ... of this hook already loaded this script, so no need to load again.\n    if (cachedScripts.includes(src)) {\n      setState({\n        loaded: true,\n        error: false\n      });\n      return function () {};\n    } else {\n      cachedScripts.push(src);\n      // Create script\n      var script_1 = document.createElement('script');\n      script_1.src = src;\n      script_1.async = true;\n      // Script event listener callbacks for load and error\n      var onScriptLoad_1 = function () {\n        setState({\n          loaded: true,\n          error: false\n        });\n      };\n      var onScriptError_1 = function () {\n        // Remove from cachedScripts we can try loading again\n        var index = cachedScripts.indexOf(src);\n        if (index >= 0) cachedScripts.splice(index, 1);\n        script_1.remove();\n        setState({\n          loaded: true,\n          error: true\n        });\n      };\n      script_1.addEventListener('load', onScriptLoad_1);\n      script_1.addEventListener('error', onScriptError_1);\n      // Add script to document body\n      document.body.appendChild(script_1);\n      // Remove event listeners on cleanup\n      return function () {\n        script_1.removeEventListener('load', onScriptLoad_1);\n        script_1.removeEventListener('error', onScriptError_1);\n      };\n    }\n  }, [src]); // Only re-run effect if script src changes\n  return [state.loaded, state.error];\n};\nvar _this = undefined;\nvar AppleLogin = function (props) {\n  var clientId = props.clientId,\n    redirectURI = props.redirectURI,\n    _a = props.state,\n    state = _a === void 0 ? \"\" : _a,\n    render = props.render,\n    _b = props.designProp,\n    designProp = _b === void 0 ? {\n      locale: \"en_US\"\n    } : _b,\n    _c = props.responseMode,\n    responseMode = _c === void 0 ? \"query\" : _c,\n    _d = props.responseType,\n    responseType = _d === void 0 ? \"code\" : _d,\n    nonce = props.nonce,\n    callback = props.callback,\n    scope = props.scope,\n    _e = props.autoLoad,\n    autoLoad = _e === void 0 ? false : _e,\n    _f = props.usePopup,\n    usePopup = _f === void 0 ? false : _f;\n  var loaded = useScript(\"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/\" + (props && props.designProp && props.designProp.locale || \"en_US\") + \"/appleid.auth.js\")[0];\n  var onClick = function (e) {\n    if (e === void 0) {\n      e = null;\n    }\n    return __awaiter(_this, void 0, void 0, function () {\n      var data, err_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (e) {\n              e.preventDefault();\n            }\n            if (!!usePopup) return [3 /*break*/, 1];\n            window.location.href = \"https://appleid.apple.com/auth/authorize?\" + generateQueryString({\n              response_type: responseType,\n              response_mode: responseMode,\n              client_id: clientId,\n              redirect_uri: encodeURIComponent(redirectURI),\n              state: state,\n              nonce: nonce,\n              scope: responseMode === \"query\" ? \"\" : scope\n            });\n            return [3 /*break*/, 4];\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n            return [4 /*yield*/, AppleID.auth.signIn()];\n          case 2:\n            data = _a.sent();\n            if (typeof callback === \"function\" && data) {\n              callback(data);\n            }\n            return [3 /*break*/, 4];\n          case 3:\n            err_1 = _a.sent();\n            if (typeof callback === \"function\") {\n              callback({\n                error: err_1\n              });\n            }\n            return [3 /*break*/, 4];\n          case 4:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  useEffect(function () {\n    if (!usePopup) {\n      if (autoLoad) {\n        onClick();\n      }\n      if (typeof callback === \"function\" && responseMode === \"query\" && responseType === \"code\" && window && window.location) {\n        var match = void 0;\n        var pl_1 = /\\+/g,\n          // Regex for replacing addition symbol with a space\n          search = /([^&=]+)=?([^&]*)/g,\n          decode = function (s) {\n            return decodeURIComponent(s.replace(pl_1, \" \"));\n          },\n          query = window.location.search.substring(1);\n        var urlParams = {};\n        while (match = search.exec(query)) {\n          urlParams[decode(match[1])] = decode(match[2]);\n        }\n        if (urlParams[\"code\"]) {\n          callback({\n            code: urlParams[\"code\"]\n          });\n        }\n      }\n    }\n    return function () {};\n  }, []);\n  useEffect(function () {\n    if (usePopup && loaded) {\n      AppleID.auth.init({\n        clientId: clientId,\n        scope: scope,\n        redirectURI: redirectURI || location.protocol + \"//\" + location.host + location.pathname,\n        state: state,\n        nonce: nonce,\n        usePopup: usePopup\n      });\n      // Call on auto load.\n      if (autoLoad) {\n        onClick();\n      }\n    }\n    return function () {};\n  }, [loaded, usePopup]);\n  if (typeof render === \"function\") {\n    return render({\n      onClick: onClick\n    });\n  }\n  return React.createElement(\"div\", {\n    id: \"appleid-signin\",\n    onClick: onClick\n  }, React.createElement(\"img\", {\n    src: \"https://appleid.cdn-apple.com/appleid/button?\" + generateQueryString(designProp)\n  }));\n};\nexport default AppleLogin;","map":{"version":3,"mappings":"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","names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","generateQueryString","q","queryString","queryKeys","Object","keys","forEach","key","toString","slice","cachedScripts","useScript","src","state","setState","useEffect","includes","loaded","error","script_1","document","createElement","async","onScriptLoad_1","onScriptError_1","index","indexOf","splice","remove","addEventListener","appendChild","removeEventListener","AppleLogin","props","redirectURI","_a","render","_b","designProp","_c","responseMode","_d","responseType","nonce","callback","scope","_e","autoLoad","_f","usePopup","onClick","preventDefault","window","location","href","response_type","response_mode","client_id","clientId","redirect_uri","encodeURIComponent","AppleID","auth","signIn","data","err_1","match","pl_1","search","decode","s","decodeURIComponent","replace","query","substring","urlParams","exec","code","init","protocol","host","pathname","React","id"],"sources":["C:\\Projects\\rakbank\\node_modules\\react-apple-login\\node_modules\\tslib\\tslib.es6.js","C:\\Projects\\rakbank\\node_modules\\react-apple-login\\src\\helper.tsx","C:\\Projects\\rakbank\\node_modules\\react-apple-login\\src\\useScript.tsx","C:\\Projects\\rakbank\\node_modules\\react-apple-login\\src\\index.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\nconst generateQueryString = (q: any) => {\n  let queryString = '';\n  if (q) {\n    const queryKeys = Object.keys(q);\n    queryKeys.forEach(key => {\n      if (q[key]) {\n        if (q[key].toString().length) {\n          queryString += `${key}=${q[key]}&`;\n        }\n      }\n    });\n    if (queryKeys.length > 0 && queryString[queryString.length - 1] === '&') {\n      queryString = queryString.slice(0, -1);\n    }\n  }\n  return queryString;\n};\n\nexport { generateQueryString };\n","import { useEffect, useState } from 'react';\n\n// Hook\nconst cachedScripts: any = [];\nconst useScript = (src: string) => {\n  // Keeping track of script loaded and error state\n  const [state, setState] = useState({\n    loaded: false,\n    error: false,\n  });\n\n  useEffect(() => {\n    // If cachedScripts array already includes src that means another instance ...\n    // ... of this hook already loaded this script, so no need to load again.\n    if (cachedScripts.includes(src)) {\n      setState({\n        loaded: true,\n        error: false,\n      });\n      return () => { }\n    } else {\n      cachedScripts.push(src);\n\n      // Create script\n      const script = document.createElement('script');\n      script.src = src;\n      script.async = true;\n\n      // Script event listener callbacks for load and error\n      const onScriptLoad = () => {\n        setState({\n          loaded: true,\n          error: false,\n        });\n      };\n\n      const onScriptError = () => {\n        // Remove from cachedScripts we can try loading again\n        const index = cachedScripts.indexOf(src);\n        if (index >= 0) cachedScripts.splice(index, 1);\n        script.remove();\n\n        setState({\n          loaded: true,\n          error: true,\n        });\n      };\n\n      script.addEventListener('load', onScriptLoad);\n      script.addEventListener('error', onScriptError);\n\n      // Add script to document body\n      document.body.appendChild(script);\n\n      // Remove event listeners on cleanup\n      return () => {\n        script.removeEventListener('load', onScriptLoad);\n        script.removeEventListener('error', onScriptError);\n      };\n    }\n  }, [src]); // Only re-run effect if script src changes\n\n  return [state.loaded, state.error];\n};\n\nexport default useScript;\n","import React, { useEffect } from \"react\";\nimport { generateQueryString } from \"./helper\";\nimport useScript from \"./useScript\";\n\ndeclare const AppleID: any;\n\nexport interface AppleLoginProps {\n  clientId: string;\n  redirectURI: string;\n  autoLoad?: boolean;\n  scope?: string;\n  state?: string;\n  responseType?: string | \"code\" | \"id_token\";\n  responseMode?: string | \"query\" | \"fragment\" | \"form_post\";\n  nonce?: string;\n  usePopup?: boolean;\n  designProp?: {\n    // REF: https://developer.apple.com/documentation/signinwithapplejs/incorporating_sign_in_with_apple_into_other_platforms\n    height?: number;\n    width?: number;\n    color?: string | \"white\" | \"black\";\n    border?: boolean;\n    type?: string | \"sign-in\" | \"continue\";\n    border_radius?: number;\n    scale?: number;\n    locale?: string;\n  };\n  callback?: (d: any) => void;\n  render?: (props: {\n    onClick: (e?: any) => void;\n    disabled?: boolean;\n  }) => JSX.Element;\n}\n\nconst AppleLogin = (props: AppleLoginProps) => {\n  const {\n    clientId,\n    redirectURI,\n    state = \"\",\n    render,\n    designProp = {\n      locale: \"en_US\"\n    },\n    responseMode = \"query\",\n    responseType = \"code\",\n    nonce,\n    callback,\n    scope,\n    autoLoad = false,\n    usePopup = false\n  } = props;\n\n  const [loaded] = useScript(\n    `https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/${(props &&\n      props.designProp &&\n      props.designProp.locale) ||\n      \"en_US\"}/appleid.auth.js`\n  );\n\n  const onClick = async (e: any = null) => {\n    if (e) {\n      e.preventDefault();\n    }\n    if (!usePopup) {\n      window.location.href = `https://appleid.apple.com/auth/authorize?${generateQueryString(\n        {\n          response_type: responseType,\n          response_mode: responseMode,\n          client_id: clientId,\n          redirect_uri: encodeURIComponent(redirectURI),\n          state,\n          nonce,\n          scope: responseMode === \"query\" ? \"\" : scope\n        }\n      )}`;\n    } else {\n      try {\n        const data = await AppleID.auth.signIn();\n        if (typeof callback === \"function\" && data) {\n          callback(data);\n        }\n      } catch (err) {\n        if (typeof callback === \"function\") {\n          callback({ error: err });\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!usePopup) {\n      if (autoLoad) {\n        onClick();\n      }\n\n      if (\n        typeof callback === \"function\" &&\n        responseMode === \"query\" &&\n        responseType === \"code\" &&\n        window &&\n        window.location\n      ) {\n        let match;\n        const pl = /\\+/g, // Regex for replacing addition symbol with a space\n          search = /([^&=]+)=?([^&]*)/g,\n          decode = (s: any) => {\n            return decodeURIComponent(s.replace(pl, \" \"));\n          },\n          query = window.location.search.substring(1);\n\n        let urlParams = {};\n        while ((match = search.exec(query))) {\n          urlParams[decode(match[1])] = decode(match[2]);\n        }\n        if (urlParams[\"code\"]) {\n          callback({\n            code: urlParams[\"code\"]\n          });\n        }\n      }\n    }\n    return () => {};\n  }, []);\n\n  useEffect(() => {\n    if (usePopup && loaded) {\n      AppleID.auth.init({\n        clientId,\n        scope,\n        redirectURI: redirectURI || `${location.protocol}//${location.host}${location.pathname}`,\n        state,\n        nonce,\n        usePopup\n      });\n\n      // Call on auto load.\n      if (autoLoad) {\n        onClick();\n      }\n    }\n    return () => {};\n  }, [loaded, usePopup]);\n\n  if (typeof render === \"function\") {\n    return render({ onClick });\n  }\n\n  return (\n    <div id=\"appleid-signin\" onClick={onClick}>\n      <img\n        src={`https://appleid.cdn-apple.com/appleid/button?${generateQueryString(\n          designProp\n        )}`}\n      />\n    </div>\n  );\n};\n\nexport default AppleLogin;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}